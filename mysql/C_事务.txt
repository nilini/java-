mysql事务
1、事务的作用
  保证一组数据库操作，要么全部成功，要么全部失败。
2、隔离性和隔离级别
  1）读未提交：一个事务还没提交时，它做的变更就能被别的事务看到。
  2）读已提交：一个事务提交之后，它做的变更才会被其他事务看到。
  3）可重复读：一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据时一致的。未提交变更对其他事务也是不可见的。
  4）串行化：同一行记录，“写”会加“写锁”，“读”会加“读锁”。出现读写冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续访问。

3、事务隔离的实现
  每条记录在更新的时候都会同时记录一条回滚操作。记录上的最新值，通过回滚操作，都可以得到前一个状态的值。
  同一条记录在系统中可以存在多个版本，就是数据库的多版本并发控制（MVCC）。
  当系统里没有比这个回滚日志更早的read-view的时候，回滚日志会被删除.
  长事务意味着系统里面会存在很古老的事务试图, 由于这些事务随时可能访问数据库里面的任何数据,所以这个事务提交之前,
  数据库里面可能用到的回滚记录都必须保留,这会导致大量占用存储空间,长事务还占用锁资源.
4. 事务的启动方式
  1) 显式启动事务语句, begin或start transaction, 配套的提交语句是commit, 回滚语句是rollback.
  2) set autocommit=0, 这个命令会将这个线程的自动提交关掉, 意味着如果只执行一个select语句, 这个事务就启动了, 而且并不会自动提交.
     这个事务会持续存在直到你主动执行commit或rollback语句, 或者断开连接.