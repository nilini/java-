<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='jquery.js'></script>
</head>
<body>
    <h1>Super Votes</h1>
    <button id="test">300票start</button>
    <br>
    <div id="ret">投票结果：</div>
    <script>
        $("#test").click(function name(params) {
            // var num = $("#num").val();
            var url = "https://jrwmsjzx.zj96296.com/interfacemarket/votesubmit?terminaltype=TV&voteid=715&voteresult=557";
            var k=0;
            var url_arr = new Array();
            for(var i=0; i<50; i++){
                var customerno = randomString(28);
                var customername = username(i);
                url2 = url + "&customerno=" + customerno + "&customername=" + customername;
                for(var j=0; j<10; j++){
                    url_arr[k++] = url2;
                }
            }
            for (index = 0; index < url_arr.length*100; index++) {
                var r = Math.floor(Math.random()*299);
                var r2 = Math.floor(Math.random()*299);
                var r2_v = url_arr[r2];
                url_arr[r2] = url_arr[r];
                url_arr[r] = r2_v;
            }
            for (index = 0; index < url_arr.length; index++) {
                if(url_arr[index] != undefined){
                    var url2 = url_arr[index];
                    var rr = Math.floor(Math.random() * (6 - 3)) + 3
                    sleep(rr);
                    $.getJSON(url2, function(data){
                        alert("Data Loaded: " + data);
                    });
                    console.log(url2);
                    var org = $("#ret").html()+"<br/>"+url2;
                    $("#ret").html(org);
                }
            }
            // console.log(url_arr);
            // sleep(5);
            //         $.getJSON(url2, function(data){
            //             alert("Data Loaded: " + data);
            //         });
            //         console.log("微信号："+customername+j+"票");
            //         var org = $("#ret").html()+"<br/>"+"微信号："+customername+"投了1票";
            //         $("#ret").html(org);
        });
        function randomString(len) {
        　　len = len || 32;
        　　var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/
        　　var maxPos = $chars.length;
        　　var pwd = '';
        　　for (i = 0; i < len; i++) {
        　　　　pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
        　　}
        　　return pwd;
        }
        function username (i){
            var mycars = new Array()
            mycars[0] = "不将就的美男子"
            mycars[1] = "不讲究"
            mycars[2] = "源源per";
            mycars[3] = "摆渡人"
            mycars[4] = "bee"
            mycars[5] = "aroes"
            mycars[6] = "bebebeb"
            mycars[7] = "糖糖"
            mycars[8] = "同堂"
            mycars[9] = "欧货"
            mycars[10] = "小城美伊 "
            mycars[11] = "惠子"
            mycars[12] = "liu"
            mycars[13] = "bbbbbaby"
            mycars[14] = "小喜哦"
            mycars[15] = "小言"
            mycars[16] = "雄安严加"
            mycars[17] = "四件套"
            mycars[18] = "monkey"
            mycars[19] = "小鹿"
            mycars[20] = "阿土"
            mycars[21] = "小南瓜"
            mycars[22] = "宝妈"
            mycars[23] = "终点"
            mycars[24] = "诚"
            mycars[25] = "日落"
            mycars[26] = "ZHUBEU"
            mycars[27] = "AJ"
            mycars[28] = "星辰"
            mycars[29] = "zzz111111"

            return mycars[i];
        }
        function sleep(n) {
            n = n*1000;
            var start = new Date().getTime();
            while(true)  if(new Date().getTime()-start > n) break;
        }
    </script>
</body>
</html>